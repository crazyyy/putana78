{"version":3,"sources":["cart.js"],"names":["Add","id","cart","length","GetArray","Find","push","OffButton","Delete","OnButton","str","join","SetCookie","ViewCart","element_id","document","getElementById","className","i","splice","CleanCart","Array","location","href","div","createElement","body","appendChild","removeChild","innerHTML","cart_link","OnLoad","cookie","GetCookie","split","name","value","cookie_string","escape","expires","Date","toGMTString","cookie_name","cookie_length","cookie_begin","value_begin","substring","value_end","indexOf","unescape","$","ready","click","element","this","attr","window","load"],"mappings":"AAIA,QAASA,KAAIC,GACK,GAAbC,KAAKC,QAENC,WAEW,IAAVC,KAAKJ,IACNC,KAAKI,KAAKL,GACVM,UAAUN,KAGVO,OAAOP,GACPQ,SAASR,IAEXS,IAAIR,KAAKS,KAAK,KACdC,UAAU,OAAQF,KAElBG,WAIF,QAASN,WAAUN,GACjBa,WAAW,QAAQb,EACqB,MAArCc,SAASC,eAAeF,cAEzBC,SAASC,eAAeF,YAAYG,UAAU,eAKlD,QAASR,UAASR,GAChBa,WAAW,QAAQb,EACqB,MAArCc,SAASC,eAAeF,cAEzBC,SAASC,eAAeF,YAAYG,UAAU,YAKlD,QAASZ,MAAKJ,GACZ,IAAIiB,EAAE,EAAGA,EAAEhB,KAAKC,OAAQe,IACtB,GAAGhB,KAAKgB,IAAIjB,EAAI,MAAOiB,EAEzB,OAAO,GAGT,QAASV,QAAOP,GACd,IAAIiB,EAAE,EAAGA,EAAEhB,KAAKC,OAAQe,IACnBhB,KAAKgB,IAAIjB,GACVC,KAAKiB,OAAOD,EAAG,GAMrB,QAASE,aACP,IAAIF,EAAE,EAAGA,EAAEhB,KAAKC,OAAQe,IACtBjB,GAAGC,KAAKgB,GACRT,SAASR,GAMX,OAJAC,MAAK,GAAImB,OACTT,UAAU,OAAQ,IAClBC,WACAE,SAASO,SAASC,KAAK,KAChB,EAGT,QAASV,YACJX,KAAKC,OAAO,EAC2B,MAArCY,SAASC,eAAe,cACzBQ,IAAIT,SAASU,cAAc,OAC3BD,IAAIvB,GAAG,WACPc,SAASW,KAAKC,YAAYH,MAK5BT,SAASW,KAAKE,YAAYb,SAASC,eAAe,aAEpDD,SAASC,eAAe,YAAYa,UAAU,YAAYC,UAAU,yEAAyE5B,KAAKC,OAAO,0KAI3J,QAAS4B,UAGP,IAFA3B,WACAS,WACIK,EAAE,EAAGA,EAAEhB,KAAKC,OAAQe,IACtBjB,GAAGC,KAAKgB,GACRX,UAAUN,IAKd,QAASG,YACP4B,OAAOC,UAAU,QACN,MAARD,QAAwB,IAARA,SACjB9B,KAAK8B,OAAOE,MAAM,MAKtB,QAAStB,WAAUuB,EAAMC,GACvBC,cAAcF,EAAO,IAAMG,OAASF,GACpCG,QAAQ,GAAIC,MAAM,OAAQ,KAAM,MAChCH,eAAiB,aAAeE,QAAQE,cACxCJ,eAAiB,WACjBtB,SAASiB,OAAOK,cAIlB,QAASJ,WAAUE,GAIjB,IAHAO,YAAcP,EAAO,IACrBQ,cAAgB5B,SAASiB,OAAO7B,OAChCyC,aAAe,EACRA,aAAeD,eAAe,CAEnC,GADAE,YAAcD,aAAeF,YAAYvC,OACrCY,SAASiB,OAAOc,UAAUF,aAAcC,cAAgBH,YAAa,CACvE,GAAIK,GAAYhC,SAASiB,OAAOgB,QAAS,IAAKH,YAI9C,OAHiB,IAAbE,IACFA,EAAYJ,eAEPM,SAASlC,SAASiB,OAAOc,UAAUD,YAAaE,IAGzD,GADAH,aAAe7B,SAASiB,OAAOgB,QAAQ,IAAKJ,cAAgB,EACxC,GAAhBA,aACF,MAGJ,MAAO,MAlIT,GAAId,WAAU,qBACV5B,KAAK,GAAImB,MAsIb6B,GAAEnC,UAAUoC,MAAM,WAChBD,EAAE,aAAaE,MAAM,WACnBC,QAAQH,EAAEI,MAAMC,KAAK,MACrBF,QAAQA,QAAQnB,MAAM,KACtBpB,WAAWuC,QAAQ,GACnBrD,IAAIc,cAENoC,EAAE,gBAAgBE,MAAM,WACtBC,QAAQH,EAAEI,MAAMC,KAAK,MACrBF,QAAQA,QAAQnB,MAAM,KACtBpB,WAAWuC,QAAQ,GACnBrD,IAAIc,gBAIRoC,EAAEM,QAAQC,KAAK,WACb1B","file":"cart.js","sourcesContent":["\nvar cart_link='/devushki_cart.php';\nvar cart=new Array();\n\nfunction Add(id) {\n  if(cart.length==0)\n  {\n    GetArray();\n  }\n  if(Find(id)==-1) {\n    cart.push(id);\n    OffButton(id);\n  }\n  else {\n    Delete(id);\n    OnButton(id);\n  }\n  str=cart.join('.');\n  SetCookie('cart', str);\n  \n  ViewCart(); \n}\n\n\nfunction OffButton(id) {\n  element_id='cart_'+id+'';\n  if(document.getElementById(element_id)!=null)\n  {\n    document.getElementById(element_id).className='cart_remove';\n  }\n}\n\n\nfunction OnButton(id) {\n  element_id='cart_'+id+'';\n  if(document.getElementById(element_id)!=null)\n  {\n    document.getElementById(element_id).className='cart_add';\n  }\n}\n\n\nfunction Find(id) {\n  for(i=0; i<cart.length; i++) {\n    if(cart[i]==id) return i;\n  }\n  return -1;\n}\n\nfunction Delete(id) {\n  for(i=0; i<cart.length; i++) {\n    if(cart[i]==id) {\n      cart.splice(i, 1)\n    }\n  }\n}\n\n\nfunction CleanCart() {\n  for(i=0; i<cart.length; i++) {\n    id=cart[i];\n    OnButton(id);\n  }\n  cart=new Array();\n  SetCookie('cart', '');\n  ViewCart();\n  document.location.href='/';\n  return false;\n} \n\nfunction ViewCart() {\n  if(cart.length>0) {\n    if(document.getElementById('cart_div')==null) {\n      div=document.createElement('div');\n      div.id='cart_div';\n      document.body.appendChild(div);\n    }\n  }\n  else\n  {\n    document.body.removeChild(document.getElementById(\"cart_div\"));\n  }\n  document.getElementById('cart_div').innerHTML='<a href=\"'+cart_link+'\" title=\"Перейти к отложенным анкетам\" rel=\"nofollow\">Мой список</a> ('+cart.length+') <br /><a href=\"javascript:CleanCart();\" class=\"cart_clean\" onclick=\"return confirm(\\'Вы уверены, что хотите очистить список отложенных анкет?\\')\">очистить список</a>';\n}\n\n\nfunction OnLoad() {\n  GetArray();\n  ViewCart();\n  for(i=0; i<cart.length; i++) {\n    id=cart[i];\n    OffButton(id);\n  }\n}\n\n\nfunction GetArray() {\n  cookie=GetCookie('cart');\n  if(cookie!=null && cookie!='') {\n    cart=cookie.split('.');\n  }\n}\n\n\nfunction SetCookie(name, value) {\n  cookie_string=name + \"=\" + escape ( value );\n  expires=new Date ('2200', '12', '30');\n  cookie_string += \"; expires=\" + expires.toGMTString();\n  cookie_string += \"; path=/\";\n  document.cookie=cookie_string;\n}\n\n\nfunction GetCookie(name) {\n  cookie_name = name + \"=\";\n  cookie_length = document.cookie.length;\n  cookie_begin = 0;\n  while (cookie_begin < cookie_length) {\n    value_begin = cookie_begin + cookie_name.length;\n    if (document.cookie.substring(cookie_begin, value_begin) == cookie_name) {\n      var value_end = document.cookie.indexOf (\";\", value_begin);\n      if (value_end == -1) {\n        value_end = cookie_length;\n      }\n      return unescape(document.cookie.substring(value_begin, value_end));\n    }\n    cookie_begin = document.cookie.indexOf(\" \", cookie_begin) + 1;\n    if (cookie_begin == 0) {\n      break;\n    }\n  }\n  return null;\n}\n\n\n\n$(document).ready(function() {\n  $('.cart_add').click(function() {\n    element=$(this).attr('id');\n    element=element.split('_');\n    element_id=element[1];\n    Add(element_id);\n  });\n  $('.cart_remove').click(function() {\n    element=$(this).attr('id');\n    element=element.split('_');\n    element_id=element[1];\n    Add(element_id);\n  });\n});\n\n$(window).load(function() {\n  OnLoad();\n});\n"],"sourceRoot":"/source/"}